<head>
    <meta charset="UTF-8">
    <title>Generacion de Factura ELECTRONICA</title>
    <link rel="stylesheet" href="../styles/styles.css"> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/css/bootstrap-datepicker.min.css">
</head>

<body class="p-4" style="margin-top: 520px; margin-bottom: 520px;">

<!--Formulario de generacion de factura-->    
    <div class="container">

      <h2 class="mb-4">Generacion de Factura Electronica</h2>
      <!-- Datos clientes -->
      <div class="card shadow-sm mb-4">
          <div class="card-header bg-primary text-white py-2">
              Cliente
          </div>
          <div class="card-body">
              <div class="table-responsive">
                  <table class="table table-borderless table-sm align-middle mb-0">
                    <thead class="table-light text-center table-primary">
                      <tr>
                          <th style="width: 35%;">Seleccione numero documento Cliente</th>                        
                          <th style="width: 40%;">Nombre Cliente</th>
                          <th style="width: 25%;">Tipo Factura</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr>
                          <td>
                              <select class="form-select" id="tipoDoc" required></select>
                          </td>
                          <td>
                            <input type="text" class="form-control form-control-sm" placeholder="Nombre" id="nombre" readonly>
                          </td>
                          <td>
                            <select class="form-select" id="tipoFactura" required>
                                
                            </select>
                        </td>  
                      </tr>
                  </tbody>
                  </table>
              </div>
          </div>       
      </div>
      <!--Modal Registro cliente-->
      <div class="modal fade" style="margin-top: 100px;" id="modalIframeCliente" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title">Registro de Cliente</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body" style="height: 500px;">
            <iframe id="registroClienteFrame"src="registrocliente.html" width="100%" height="100%" frameborder="0"></iframe>
          </div>
        </div>
      </div>
      </div>
      <!-- Datos del producto -->
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white py-2">
          Productos
        </div>
        <div class="card-body p-2">
          <div class="table-responsive">
            <table class="table table-borderless table-sm align-middle mb-0">
              <thead class="table-light text-center">
                <tr>
                  <th style="width: 30%;">Seleccione producto</th>                  
                  <th style="width: 10%;">Cantidad</th>
                  <th style="width: 12%;">Precio Unitario</th>
                  <th style="width: 12%;">Valor por item</th>
                  <th style="width: 12%;"> % Descuento </th>
                  <th style="width: 12%;"> % Recargo </th>
                  <th style="width: 15%;">Acciones</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <select class="form-select" id="productos" required></select>
                  </td>
                  <td>
                    <input type="number" class="form-control form-control-sm" value="0" id="cantidadInput" required>
                  </td>
                  <td>
                    <input type="number" class="form-control form-control-sm" value="0.00" id="precioUnidad" readonly>
                  </td>
                  <td>
                    <input type="number" class="form-control form-control-sm" value="0.00" readonly id="valorXItem" readonly>
                  </td>
                  <td>
                    <input type="number" class="form-control form-control-sm" value="0.00" id="descuentoInput" >
                  </td>
                  <td>
                    <input type="number" class="form-control form-control-sm" value="0.00" id="recargoInput">
                  </td>
                  <td class="text-center">
                    <button class="btn btn-primary btn-sm" id="agregarBtn">
                      <i class="bi bi-plus-lg"></i> Agregar
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div>

          </div>
          <table class="table table-striped mt-5 small" id="tablaProductos" style="width:100%; margin-bottom: 10px;">
            <thead class="table-light text-center">
            <tr class="table-primary">
              <th>Codigo</th>
              <th>Producto</th>
              <th>Cantidad</th>
              <th>Precio Unitario</th>
              <th>Valor bruto item</th>
              <th>Valor Descuento</th>
              <th>Valor Recargo</th>
              <th>Valor neto item</th>
              <th>Quitar</th>
            </tr>
          </thead>
          <tbody class="table-light text-center">
      <!-- Filas dinÃ¡micas -->
           </tbody>
            </table>
        </div>
      </div>    
      





        <!-- Datos Resumen --> 
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white py-2">
          Resumen
        </div>
        <div class="card-body">
          <div class="container text-center">
            <div class="row g-2">

              <div class="col-2 me-4">
                  <div class="row g-3 mb-2">
                      <label class="form-label"><b>Descuento</b></label>
                  </div>
                  <div class="row g-3 mb-2">
                      <label class="form-label"><b>Recargo</b></label>
                  </div>  
                  <div class="row g-3 mb-2">
                      <label class="form-label"><b>Base gravable</b></label>
                  </div>                
              </div>
        
              <div class="col-2 me-4">
                  <div class="row mb-2">
                    <label class="form-label" id="totalDescuentos">$ 00.0</label>
                  </div> 
                  <div class="row mb-2">
                    <label class="form-label" id="totalRecargos">$ 00.0</label>
                  </div>
                  <div class="row mb-2">
                    <label class="form-label" id="totalBaseGravable">$ 00.0</label>
                  </div> 
              </div>
              
              <div class="col-1 me-4 mb-2">
                  <div class="row mb-2">
                      <label class="form-label"><b>IVA</b></label>                   
                  </div>
                  <div class="row mb-2">
                    <label class="form-label"><b>INC</b></label>
                  </div>
                  <div class="col-auto" style="min-width: 200px;">
                    <label class="form-label text-wrap"><b>Total impuestos</b></label>
                  </div>
              </div>    
              <div class="col-1 me-4 mb-2">
                <div class="row mb-2">
                  <label class="form-label" id="totalIVA">$ 00.0</label>
                </div>
                <div class="row mb-2">
                  <label class="form-label" id="totalINC">$ 00.0</label>
                </div>
              </div>              

              <div class="col-1 me-4 mb-2">
                  <div class="row mb-2">
                      <label class="form-label"><b>Bolsas</b></label>
                  </div>
                  <div class="row mb-2">
                      <label class="form-label"><b>ICUI-IBUA</b></label>
                  </div>
                  <div class="col-auto" style="min-width: 200px;">
                <label class="form-label text-wrap " id="totalImpuestos">$ 00.0</label>
              </div> 
              </div>

              <div class="col-1 me-4 mb-2">
                <div class="row mb-2">
                  <label class="form-label" id="totalBolsas">$ 00.0</label>
                </div>
                <div class="row mb-2">
                  <label class="form-label" id="totalAzucarados">$ 00.0</label>
                </div>
                 
              </div>
              <div class="col-2 me-4 mb-2">
                <div class="row mb-2">
                  <label class="form-label fs-5"><b>Total factura</b></label>
                </div>
                <div class="row mb-2">
                  <label class="form-label fs-5" id="totalFactura"><b>$ 00.0</b></label>
                </div>
              </div>
            <div class="row g-2"></div>
            <div class="row g-2"></div>
          </div>

          <div class="container text-center">
              <div class="row g-2">
                <div class="col-2 me-4 mb-2">
                  <label class="form-label"><b>Sub-Total</b></label>
                </div>
                <div class="col-2 me-4 mb-2">
                  <label class="form-label" id="subTotal">$ 00.0</label>
                </div>           
            </div> 

            <div class="row g-2 ">
              <div class="col-2 me-4 mb-2">
                <label class="form-label"><b>Descuento global</b></label>
              </div>
              <div class="col-2 me-4 mb-2">
                <input type="number" class="form-control form-control-sm" placeholder="Ingrese %" id="descuentoGlobal">
              </div>
              <div class="col-1 me-4 mb-2">
                <label class="form-label" id="valorDescuentoGlobbal">$ 00.0</label>
              </div>  
              <div class="col-2 me-4 mb-2">
                <label class="form-label"><b>Recargo global</b></label>
              </div>
              <div class="col-2 me-4 mb-2">
                <input type="number" class="form-control form-control-sm" placeholder="Ingrese %" id="recargoGlobal">
              </div>
              <div class="col-1 me-4 mb-2">
                <label class="form-label" id="valorRecargoGlobbal">$ 00.0</label>
              </div>
            </div> 
          </div>    
        </div>
        
        <div class="container text-center mt-4">
          <div class="table-responsive">
            <table class="table table-borderless table-sm align-middle mb-0">
              <thead class="table-light text-center">
                <tr>
                    <th style="width: 40%;">Medio de Pago</th>
                    <th style="width: 40%;">Metodo de Pago</th>
                    <th style="width: 30%;" id="labelgrupo-fecha">Fecha vencimiento</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <select class="form-select" id="medioDePago">
                            <option selected>Seleccione</option>
                        </select>
                    </td>
                    <td>
                      <select class="form-select" id="metodoDePago">
                          <option selected>Seleccione</option>
                      </select>
                  </td>
                  <td>
                    <div class="input-group" id="grupo-fecha">
                      <input type="text" id="fecha" class="form-control readonly-input" readonly>                      
                      <span class="input-group-text bg-primary text-white" id="icono-fecha">
                        <i class="bi bi-calendar"></i>
                      </span>
                    </div>      
                  </td> 
                </tr>
            </tbody>
            </table>
          </div>
          <div class="d-flex justify-content-end gap-2 mt-4">
            <button class="btn btn-primary" type="submit" id="guardarBtn">Guardar</button>
            <button type="button" class="btn btn-danger" data-bs-toggle="collapse" data-bs-target="#generarFactura" aria-expanded="true" aria-controls="generarFactura">
              Cancelar
            </button>
          </div>
      </div>
      </div>  

  
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/js/bootstrap-datepicker.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../scripts/Datepicker.js"></script>
  <script src="../scripts/cargarElementosList.js"></script>
  <script src="../scripts/agregarProducto.js"></script>
  <script src="../scripts/calcularValorItem.js"></script>
  <script src="../scripts/calculosValores.js"></script>
  <script src="../scripts/generarFactura.js"></script>

                       
</body>
